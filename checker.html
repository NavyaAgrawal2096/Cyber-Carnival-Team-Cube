<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DontClickThat</title>

    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&family=Inter:wght@400;600&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <style>

    </style>
</head>

<body>
    <button id="themeToggle" class="theme-btn">ðŸŒ™</button>
    <div class="sidebar">
        <div class="logo"> DontClickThat</div>

        <div class="nav">
            <button onclick="location.href='index.html'"> Home</button>
            <button onclick="location.href='checker.html'"> Scan URL</button>
            <button onclick="location.href='learn.html'"> Learn</button>
            <button onclick="location.href='quiz.html'"> Quiz</button>
            <button onclick="location.href='about.html'">About</button>
        </div>
    </div>

    <div class="main">
        <div class="card">
            <h2> Scan Suspicious URL</h2>
            <input id="urlInput" placeholder="Enter suspicious URL">
            <button class="action-btn" onclick="analyze()">Scan Now</button>
            <div id="result" style="margin-top:20px;"></div>
            <div class="risk-bar">
                <div id="riskFill"></div>
            </div>
            <div id="reasons" style="margin-top:20px;"></div>
        </div>
    </div>
    <script src="script.js"></script>
<script>
function analyze() {
    let url = document.getElementById("urlInput").value.trim();
    let score = 0, reasons = [];

    if (!url) return alert("Enter URL");

    let lowerUrl = url.toLowerCase();

    // Extract hostname safely
    let hostname = "";
    try {
        hostname = new URL(url).hostname.toLowerCase();
    } catch {
        score += 3;
        reasons.push("Invalid URL format.");
    }

    // 1. Length Check
    if (url.length > 75) {
        score += 2;
        reasons.push("URL too long.");
    }

    // 2. HTTPS Check
    if (!url.startsWith("https://")) {
        score += 2;
        reasons.push("No HTTPS encryption.");
    }

    // 3. IP Address Check
    if (/^(\d{1,3}\.){3}\d{1,3}$/.test(hostname)) {
        score += 4;
        reasons.push("Uses raw IP address.");
    }

    // 4. Suspicious TLDs
    let badTLDs = [".tk", ".gq", ".xyz", ".top", ".click", ".ga"];
    if (badTLDs.some(tld => hostname.endsWith(tld))) {
        score += 3;
        reasons.push("Suspicious domain extension.");
    }

    // 5. Too Many Subdomains
    if (hostname.split(".").length > 3) {
        score += 2;
        reasons.push("Too many subdomains.");
    }

    // 6. Brand Name Trap Check
    let brands = ["google", "paypal", "amazon", "facebook", "microsoft"];
    for (let brand of brands) {
        if (lowerUrl.includes(brand) && !hostname.includes(brand + ".com")) {
            score += 3;
            reasons.push("Brand name used in suspicious way.");
            break;
        }
    }

    // 7. @ Symbol Trick
    if (url.includes("@")) {
        score += 4;
        reasons.push("@ symbol detected (redirect trick).");
    }

    // 8. Hyphen Overuse
    if ((hostname.match(/-/g) || []).length >= 3) {
        score += 2;
        reasons.push("Too many hyphens in domain.");
    }

    // 9. Suspicious Keywords
    let words = ["login", "verify", "bank", "secure", "free", "update", "account"];
    for (let w of words) {
        if (lowerUrl.includes(w)) {
            score += 2;
            reasons.push("Suspicious keyword: " + w);
            break;
        }
    }

    // Risk Level
    let label, color;
    if (score <= 3) {
        label = "SAFE";
        color = "var(--safe)";
    } else if (score <= 8) {
        label = "SUSPICIOUS";
        color = "var(--warning)";
    } else {
        label = "DANGEROUS";
        color = "var(--danger)";
    }

    document.getElementById("result").innerHTML =
        `<h3 style="color:${color};">${label}</h3>`;

    document.getElementById("riskFill").style.width =
        Math.min(score, 10) / 10 * 100 + "%";
    document.getElementById("riskFill").style.background = color;

    document.getElementById("reasons").innerHTML =
        reasons.length
            ? "<ul>" + reasons.map(r => "<li>" + r + "</li>").join("") + "</ul>"
            : "";
}
</script>
</body>

</html>
